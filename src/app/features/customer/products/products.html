<div class="container products-page py-4">
  <!-- Title -->
  <h2  *ngIf="!isFeatured" class="title text-center mb-4">Danh s√°ch s·∫£n ph·∫©m</h2>

  <!-- B·ªô l·ªçc -->
  <div class="filter-buttons d-flex flex-wrap justify-content-center mb-4">
    <button *ngFor="let cat of categories" class="btn" [class.active]="selectedCategory === cat"
      (click)="selectedCategory = cat; filterProducts()">
      {{ cat }}
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-success" role="status"></div>
    <p class="mt-2">ƒêang t·∫£i d·ªØ li·ªáu...</p>
  </div>

  <!-- Kh√¥ng c√≥ s·∫£n ph·∫©m -->
  <div *ngIf="!isLoading && filteredProducts.length === 0" class="alert alert-warning text-center">
    Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o ph√π h·ª£p.
  </div>

  <!-- Danh s√°ch s·∫£n ph·∫©m -->
  <div class="row g-4" *ngIf="!isLoading">
    <div class="col-md-4 col-lg-3" *ngFor="let p of filteredProducts; trackBy: trackByProductId">
      <div class="product-card shadow-sm text-center">
        <!-- ·∫¢nh -->
        <div class="product-img">
          <img [src]="p.imageUrls && p.imageUrls.length > 0 ? p.imageUrls[0] : 'assets/nen.jpg'" alt="{{ p.name }}">
        </div>

        <!-- Ch·ªâ hi·ªÉn th·ªã T√™n + Gi√° -->
        <div class="product-content d-flex flex-column">
          <h5 class="text-truncate">{{ p.name }}</h5>
          <p class="price text-danger">{{ p.price | currency:'VND':'symbol' }}</p>

          <!-- Ch·ªâ c√≥ n√∫t xem chi ti·∫øt -->
          <div class="actions mt-auto">
            <button class="btn-action" (click)="addToCart(p)" title="Th√™m v√†o gi·ªè h√†ng">üõí</button>
            <button class="btn-action" (click)="addToWishlist(p)" title="Th√™m v√†o y√™u th√≠ch">‚ù§Ô∏è</button>
            <button class="btn-action" (click)="viewDetails(p)" title="Chi ti·∫øt">üîç</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal chi ti·∫øt -->
  <app-product-item [product]="selectedProduct" (closeModal)="selectedProduct = null">
  </app-product-item>
  <!-- Ph√¢n trang -->
  <app-pagination *ngIf="!isFeatured" [total]="totalPages" [pageSize]="pageSize" [pageIndex]="pageNumber" (pageChange)="changePage($event)"
    (pageSizeChange)="changePageSize($event)"></app-pagination>