<div class="login-container">
  <div class="flex justify-center items-center min-h-screen">
    <nz-card class="auth-card w-[800px]" nzTitle="Đăng Ký" [nzBordered]="true" [nzHoverable]="true">
      <div class="text-center mb-3">
        <nz-avatar nzSize="large" nzShape="circle"
          nzSrc="https://pluspng.com/img-png/user-png-icon-account-avatar-human-male-man-men-people-person-download-svg-download-png-edit-icon-512.png">
        </nz-avatar>
      </div>
      <form nz-form [formGroup]="signUpForm" (ngSubmit)="signUp()">

        <div nz-row [nzGutter]="16">
          <!-- Họ và Tên -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Họ và Tên</nz-form-label>
              <nz-form-control [nzSpan]="24" nzErrorTip="Vui lòng nhập họ và tên!">
                <input nz-input formControlName="fullname" placeholder="Nhập họ và tên" />
              </nz-form-control>
            </nz-form-item>
          </div>

          <!-- Số điện thoại -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Số điện thoại</nz-form-label>
              <nz-form-control [nzSpan]="24" [nzErrorTip]="phoneErrorTpl">
                <input nz-input type="tel" inputmode="numeric" maxlength="10" formControlName="phoneNumber"
                  placeholder="Nhập số điện thoại" />
                <ng-template #phoneErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('pattern')">
                    Số điện thoại phải bắt đầu bằng 0 và có đúng 10 số!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <div nz-row [nzGutter]="16">
          <!-- Tên đăng nhập -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Tên đăng nhập</nz-form-label>
              <nz-form-control [nzSpan]="24" [nzErrorTip]="usernameErrorTpl">
                <input nz-input formControlName="username" placeholder="Nhập tên đăng nhập" />
                <ng-template #usernameErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('required')">Vui lòng nhập tên đăng nhập!</ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>

          <!-- Email -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Email</nz-form-label>
              <nz-form-control [nzSpan]="24" [nzErrorTip]="emailErrorTpl">
                <input nz-input formControlName="email" placeholder="Nhập email" />
                <ng-template #emailErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('required')">Vui lòng nhập email!</ng-container>
                  <ng-container *ngIf="control.hasError('email')">Email không hợp lệ!</ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <!-- Địa chỉ -->
        <nz-form-item>
          <nz-form-label [nzSpan]="24">Địa chỉ</nz-form-label>
          <nz-form-control [nzSpan]="24">
            <input nz-input formControlName="address" placeholder="Nhập địa chỉ" />
          </nz-form-control>
        </nz-form-item>

        <div nz-row [nzGutter]="16">
          <!-- Mật khẩu -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Mật khẩu</nz-form-label>
              <nz-form-control [nzSpan]="24" [nzErrorTip]="passwordErrorTpl">
                <div class="password-wrapper">
                  <input nz-input [type]="passwordVisible ? 'text' : 'password'" formControlName="password"
                    placeholder="********" />
                  <span class="toggle-eye" (click)="passwordVisible = !passwordVisible">
                    <nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'" nzTheme="outline"></nz-icon>
                  </span>
                  <ng-template #passwordErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">
                      Vui lòng nhập mật khẩu!
                    </ng-container>
                    <ng-container *ngIf="control.hasError('minlength')">
                      Mật khẩu phải có ít nhất 6 ký tự!
                    </ng-container>
                  </ng-template>
                </div>
              </nz-form-control>
            </nz-form-item>
          </div>

          <!-- Xác nhận mật khẩu -->
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24" nzRequired>Xác nhận mật khẩu</nz-form-label>
              <nz-form-control [nzSpan]="24" [nzErrorTip]="confirmTpl">
                <div class="password-wrapper">
                  <input nz-input [type]="confirmPasswordVisible ? 'text' : 'password'" formControlName="c_password"
                    placeholder="********" />
                  <span class="toggle-eye" (click)="confirmPasswordVisible = !confirmPasswordVisible">
                    <nz-icon [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'" nzTheme="outline"></nz-icon>
                  </span>
                </div>
                <ng-template #confirmTpl let-control>
                  <ng-container *ngIf="control.hasError('required')">Vui lòng xác nhận mật khẩu!</ng-container>
                  <ng-container *ngIf="signUpForm.hasError('notSame')">Mật khẩu không khớp!</ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <!-- Nút Đăng ký -->
        <div class="mt-3">
          <button nz-button nzType="primary" nzBlock [disabled]="signUpForm.invalid">
            {{isLoading ? 'Đang đăng ký...' : 'Đăng Ký'}}
          </button>
        </div>

        <!-- Chuyển hướng -->
        <div class="text-center mt-3">
          Bạn đã có tài khoản?
          <a [routerLink]="['/login']">Đăng Nhập</a> tại đây.
        </div>
      </form>
    </nz-card>
  </div>
</div>